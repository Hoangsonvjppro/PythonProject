Index: templates/translate_text.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends \"base.html\" %}\r\n\r\n{% block title %}Translate Text{% endblock %}\r\n\r\n{% block content %}\r\n    <div class=\"container\">\r\n        <h2 class=\"text-center\">Translate Text</h2>\r\n        <form id=\"translate-form\" class=\"mt-3\">\r\n            <div class=\"mb-3\">\r\n                <label for=\"text\" class=\"form-label\">Enter text or speak:</label>\r\n                <textarea name=\"text\" id=\"text\" rows=\"3\" class=\"form-control\" required></textarea>\r\n                <button type=\"button\" id=\"startRecord\" class=\"btn btn-success mt-2\">\uD83C\uDFA4 Start Recording</button>\r\n                <button type=\"button\" id=\"stopRecord\" class=\"btn btn-danger mt-2\" style=\"display: none;\">Stop Recording</button>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n                <label for=\"target_lang\" class=\"form-label\">Target Language:</label>\r\n                <select id=\"target_lang\" class=\"form-select\" name=\"target_lang\">\r\n                    <option value=\"en\">English</option>\r\n                    <option value=\"vi\">Vietnamese</option>\r\n                    <option value=\"cn\">Chinese</option>\r\n                    <option value=\"ja\">Japanese</option>\r\n                </select>\r\n            </div>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Translate</button>\r\n        </form>\r\n        <h3 class=\"mt-3\" id=\"translatedText\"></h3>\r\n    </div>\r\n\r\n    <script>\r\n        let recognition = null;\r\n        let mediaRecorder = null;\r\n        let audioChunks = [];\r\n\r\n        // Khởi tạo Web Speech API\r\n        if ('webkitSpeechRecognition' in window) {\r\n            recognition = new webkitSpeechRecognition();\r\n            recognition.continuous = false; // Chỉ ghi âm một lần\r\n            recognition.lang = 'vi-VN'; // Ngôn ngữ mặc định là tiếng Việt\r\n            recognition.interimResults = false;\r\n            recognition.maxAlternatives = 1;\r\n\r\n            recognition.onresult = function(event) {\r\n                const speechResult = event.results[0][0].transcript;\r\n                document.getElementById('text').value = speechResult;\r\n                document.getElementById('stopRecord').style.display = 'none';\r\n                document.getElementById('startRecord').style.display = 'inline-block';\r\n            };\r\n\r\n            recognition.onerror = function(event) {\r\n                console.error('Lỗi nhận diện giọng nói:', event.error);\r\n                document.getElementById('translatedText').innerText = 'Lỗi khi nhận diện giọng nói!';\r\n                document.getElementById('stopRecord').style.display = 'none';\r\n                document.getElementById('startRecord').style.display = 'inline-block';\r\n            };\r\n        } else {\r\n            alert('Trình duyệt của bạn không hỗ trợ nhận diện giọng nói!');\r\n        }\r\n\r\n        // Bắt đầu ghi âm bằng Web Speech API\r\n        document.getElementById('startRecord').addEventListener('click', function() {\r\n            if (recognition) {\r\n                recognition.start();\r\n                document.getElementById('startRecord').style.display = 'none';\r\n                document.getElementById('stopRecord').style.display = 'inline-block';\r\n                document.getElementById('translatedText').innerText = 'Đang ghi âm...';\r\n            }\r\n        });\r\n\r\n        // Dừng ghi âm bằng Web Speech API\r\n        document.getElementById('stopRecord').addEventListener('click', function() {\r\n            if (recognition) {\r\n                recognition.stop();\r\n                document.getElementById('translatedText').innerText = '';\r\n            }\r\n        });\r\n\r\n        // Xử lý dịch văn bản\r\n        document.getElementById(\"translate-form\").addEventListener(\"submit\", async function(event) {\r\n            event.preventDefault();\r\n\r\n            let text = document.getElementById(\"text\").value;\r\n            let target_lang = document.getElementById(\"target_lang\").value;\r\n\r\n            try {\r\n                let response = await fetch(\"/translate\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\"\r\n                    },\r\n                    body: JSON.stringify({ text: text, target_lang: target_lang })\r\n                });\r\n\r\n                let data = await response.json();\r\n\r\n                if (data.success) {\r\n                    document.getElementById(\"translatedText\").innerText = \"Kết quả: \" + data.translated_text;\r\n                } else {\r\n                    document.getElementById(\"translatedText\").innerText = \"Lỗi: \" + data.error;\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Lỗi:\", error);\r\n                document.getElementById(\"translatedText\").innerText = \"Lỗi khi gửi request!\";\r\n            }\r\n        });\r\n    </script>\r\n{% endblock %}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/templates/translate_text.html b/templates/translate_text.html
--- a/templates/translate_text.html	(revision 13c18666293d08d5d5614409f84a345f778cff04)
+++ b/templates/translate_text.html	(date 1742170169526)
@@ -17,8 +17,6 @@
                 <select id="target_lang" class="form-select" name="target_lang">
                     <option value="en">English</option>
                     <option value="vi">Vietnamese</option>
-                    <option value="cn">Chinese</option>
-                    <option value="ja">Japanese</option>
                 </select>
             </div>
             <button type="submit" class="btn btn-primary">Translate</button>
@@ -34,8 +32,8 @@
         // Khởi tạo Web Speech API
         if ('webkitSpeechRecognition' in window) {
             recognition = new webkitSpeechRecognition();
-            recognition.continuous = false; // Chỉ ghi âm một lần
-            recognition.lang = 'vi-VN'; // Ngôn ngữ mặc định là tiếng Việt
+            recognition.continuous = false;
+            recognition.lang = 'vi-VN';
             recognition.interimResults = false;
             recognition.maxAlternatives = 1;
 
